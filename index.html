<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Bubble Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script src="https://cdn.jsdelivr.net/npm/matter-js@0.20.0/build/matter.min.js"></script>
<style>
  :root{
    /* palette: slightly paler but vivid */
    --purple:#9b8ae0;   --purple-text:#6b57c0;
    --blue:#74cef9;     --blue-text:#008fe0;
    --green:#b8e68f;    --green-text:#4da623;
    --orange:#f8d79f;   --orange-text:#c6831f;
    --pink:#ff9fc6;     --pink-text:#ff2e76;
    --bg:#fff4f0; /* warmer near-white */
  }
  html,body{
    height:100%;
    margin:0;
    background:var(--bg);
    font-family:"Courier New", monospace;
    overflow:hidden;
  }

  /* Fixed header */
  header{
    position:fixed; inset:0 0 auto 0; height:58px;
    display:flex; align-items:center; justify-content:space-between;
    padding:0 16px; z-index:1000; background:transparent;
    pointer-events:none;
  }
  header h1{
    margin:0; font-size:clamp(18px, 2.6vw, 32px); font-weight:700; color:#222;
    pointer-events:auto;
  }
  header a{
    pointer-events:auto;
    font-weight:700; text-decoration:none; color:#1a73e8; /* blue to denote link */
    font-size:clamp(14px, 2vw, 22px);
  }

  /* Stage for DOM bubbles */
  #bubble-stage{ position:fixed; inset:0; }

  /* Generic bubble styling */
  .bubble{
    position:absolute; transform:translate(-50%,-50%);
    display:flex; align-items:center; justify-content:center; text-align:center;
    border-radius:50%;
    border:1px solid rgba(0,0,0,0.08);
    box-shadow:0 6px 18px rgba(0,0,0,0.06);
    overflow:hidden;
    transition:box-shadow .2s ease, filter .2s ease;
  }
  .bubble.clickable{ cursor:pointer; }
  .bubble.clickable .heading text{
    filter:drop-shadow(1px 1px 0 #fff); /* “indent” hint */
  }
  .bubble.clickable .content{ text-shadow:0 1px 0 rgba(255,255,255,0.7); }

  .bubble-inner{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:10%; }
  .content{
    line-height:1.2; white-space:pre-wrap; word-break:break-word;
    max-width:76%;
    color:#1a1a1a;
    font-size:clamp(12px, 1.6vw, 20px);
  }

  /* Arched heading via SVG at top; color classes drive fill */
  .heading{ position:absolute; inset:0; pointer-events:none; }
  .heading text{ font-weight:700; letter-spacing:.02em; }

  /* Image bubble (non-clickable), hover to swap */
  .image-fill{
    position:absolute; inset:0;
    background-size:cover; background-position:center;
    transition:opacity .25s ease;
  }
  .image-fill.child{ opacity:0; }
  .bubble.image:hover .image-fill.child{ opacity:1; }
  .bubble.image:hover .image-fill.current{ opacity:0; }

  /* Research container visuals */
  .research-container{
    position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
    pointer-events:none;
  }
  .research-grid{
    position:relative; width:80%; height:80%;
    display:grid; grid-template-columns:repeat(3,1fr); gap:4%;
    pointer-events:none;
  }
  .research-grid .mini{
    pointer-events:auto;
    border-radius:50%;
    border:1px solid rgba(0,0,0,0.08);
    box-shadow:0 2px 10px rgba(0,0,0,0.05);
    padding:8%;
    text-align:center;
    font-size:clamp(11px, 1.3vw, 16px);
    color:#1a1a1a;
    display:flex; align-items:center; justify-content:center;
    aspect-ratio:1 / 1; /* ensures circle, not oval */
  }

  /* Color utility classes - set both color & fill (for SVG text) */
  .c-purple{background:var(--purple);} .t-purple{color:var(--purple-text); fill:var(--purple-text);}
  .c-blue{background:var(--blue);}     .t-blue{color:var(--blue-text);     fill:var(--blue-text);}
  .c-green{background:var(--green);}   .t-green{color:var(--green-text);   fill:var(--green-text);}
  .c-orange{background:var(--orange);} .t-orange{color:var(--orange-text); fill:var(--orange-text);}
  .c-pink{background:var(--pink);}     .t-pink{color:var(--pink-text);     fill:var(--pink-text);}

  @media (max-width: 640px){
    .content{ max-width:86%; font-size:clamp(12px, 3.6vw, 18px); }
  }
</style>
</head>
<body>

<header>
  <h1 id="hdrTitle">Hello World</h1>
  <a id="hdrLink" href="https://yourusername.github.io">yourusername.github.io</a>
</header>

<div id="bubble-stage"></div>

<script>
/* ===== Physics + DOM bubbles ===== */
const { Engine, Runner, World, Bodies, Body, Events } = Matter;

const stage = document.getElementById('bubble-stage');
let engine, runner, walls = [];
let domBubbles = []; // {el, body, r}
let mousePos = { x: innerWidth/2, y: innerHeight/2 };

function vw(){ return Math.max(document.documentElement.clientWidth, window.innerWidth || 0); }
function vh(){ return Math.max(document.documentElement.clientHeight, window.innerHeight || 0); }

/* Bigger sizes that scale with the window */
function getSizes(){
  const minSide = Math.min(vw(), vh());
  const normalR = Math.max(85, Math.floor(minSide * 0.17));  // larger normal bubbles
  const largeR  = Math.floor(normalR * 2.4);                 // big research bubble
  const imageR  = Math.floor(normalR * 1.35);                // image bubble slightly larger
  return { normalR, largeR, imageR };
}

/* Create a bubble: DOM + physics */
function makeBubble({x, y, r, colorClass, textColorClass, heading, content, clickable=false, type='text', images=null, id=null}){
  const el = document.createElement('div');
  el.className = `bubble ${colorClass} ${clickable?'clickable':''} ${type==='image'?'image':''}`;
  el.style.width = `${r*2}px`; el.style.height = `${r*2}px`;

  /* Heading (arched) via SVG */
  const svg = document.createElementNS("http://www.w3.org/2000/svg","svg");
  svg.setAttribute('class','heading');
  svg.setAttribute('viewBox','0 0 100 100');
  const defs = document.createElementNS("http://www.w3.org/2000/svg","defs");
  const path = document.createElementNS("http://www.w3.org/2000/svg","path");
  const pathId = `arc-${Math.random().toString(36).slice(2)}`;
  path.setAttribute('id', pathId);
  path.setAttribute('d','M10,60 A40,40 0 0,1 90,60'); // arc across top
  defs.appendChild(path);
  svg.appendChild(defs);
  const text = document.createElementNS("http://www.w3.org/2000/svg","text");
  text.setAttribute('class', textColorClass);
  const textPath = document.createElementNS("http://www.w3.org/2000/svg","textPath");
  textPath.setAttributeNS('http://www.w3.org/1999/xlink','href',`#${pathId}`);
  textPath.setAttribute('startOffset','50%');
  textPath.setAttribute('text-anchor','middle');
  textPath.textContent = heading || '';
  text.appendChild(textPath);
  svg.appendChild(text);
  el.appendChild(svg);

  /* Main content */
  const inner = document.createElement('div');
  inner.className = 'bubble-inner';
  const contentBox = document.createElement('div');
  contentBox.className = 'content';
  contentBox.textContent = content || '';
  inner.appendChild(contentBox);
  el.appendChild(inner);

  /* Image fills (non-clickable, hover swap) */
  if(type==='image' && images){
    const current = document.createElement('div');
    current.className='image-fill current';
    current.style.backgroundImage = `url('${images.current}')`;
    const child = document.createElement('div');
    child.className='image-fill child';
    child.style.backgroundImage = `url('${images.child}')`;
    el.appendChild(current); el.appendChild(child);
  }

  /* Research topics (visual only) */
  if(type==='research'){
    const rc = document.createElement('div'); rc.className='research-container';
    const grid = document.createElement('div'); grid.className='research-grid';
    const topics = [
      { text:"User-Centric Design:\nWhy can't we make user experience fun without losing functionality or efficiency?\nI.e. make applications which we have to use, fun to use", cls:'c-purple t-purple' },
      { text:"Education:\nHow is the learning experience evolving with technological advances and society?\nIn the learning process, where is the right balance between technology being supportive and not a critical dependence?", cls:'c-blue t-blue' },
      { text:"Social Good:\nHow can we create a more tech-literate society?\nHow can we enable the general public to make informed decisions on tech related public policy?", cls:'c-green t-green' }
    ];
    topics.forEach(t=>{
      const mini = document.createElement('div');
      mini.className=`mini ${t.cls}`;
      mini.textContent = t.text;
      grid.appendChild(mini);
    });
    rc.appendChild(grid); el.appendChild(rc);
  }

  /* Click behavior */
  if(clickable){
    el.addEventListener('click', ()=>{
      if(id==='try'){
        window.location.href = 'project.html'; // same tab
      }
    });
  }

  stage.appendChild(el);

  /* Physics body */
  const body = Bodies.circle(x, y, r, {
    restitution: 0.98,
    frictionAir: 0.012,
    friction: 0.0001,
    frictionStatic: 0.0001
  });
  World.add(engine.world, body);

  /* Store & return */
  const rec = { el, body, r };
  domBubbles.push(rec);
  return rec;
}

/* Build world */
function buildWorld(){
  if(engine){ Matter.World.clear(engine.world, false); engine = null; }
  stage.innerHTML = ''; domBubbles = [];

  engine = Engine.create();
  engine.world.gravity.x = 0;
  engine.world.gravity.y = 0;

  /* Walls hugging window edges */
  const w = vw(), h = vh(), thick = 200;
  const walls = [
    Bodies.rectangle(w/2, -thick/2, w+thick*2, thick, { isStatic:true }),
    Bodies.rectangle(w/2, h+thick/2, w+thick*2, thick, { isStatic:true }),
    Bodies.rectangle(-thick/2, h/2, thick, h+thick*2, { isStatic:true }),
    Bodies.rectangle(w+thick/2, h/2, thick, h+thick*2, { isStatic:true })
  ];
  World.add(engine.world, walls);

  const { normalR, largeR, imageR } = getSizes();

  const rx = (r)=> Math.random()*(vw()-2*r)+r;
  const ry = (r)=> Math.random()*(vh()-2*r)+r;

  /* Bubbles */
  // Image (non-clickable, hover swap)
  makeBubble({
    x: rx(imageR), y: ry(imageR), r: imageR,
    colorClass:'c-pink', textColorClass:'t-pink',
    heading:'Me',
    content:'PhD Student / Designer',
    clickable:false,
    type:'image',
    images:{ current:'IMG_9361.jpg', child:'IMG_5766_Original.jpg' }
  });

  // Education bubble (degrees list)
  makeBubble({
    x: rx(normalR), y: ry(normalR), r: normalR,
    colorClass:'c-blue', textColorClass:'t-blue',
    heading:'Education',
    content:'BEng X at Y\nMSc A at B\nInterested in relevant PhD opportunities',
    clickable:false
  });

  // Second education-ish bubble (different color)
  makeBubble({
    x: rx(normalR), y: ry(normalR), r: normalR,
    colorClass:'c-purple', textColorClass:'t-purple',
    heading:'Education+',
    content:'Workshops • Awards\nTeaching • Supervision\nOpen to PhD collaborations',
    clickable:false
  });

  // Experience
  makeBubble({
    x: rx(normalR), y: ry(normalR), r: normalR,
    colorClass:'c-green', textColorClass:'t-green',
    heading:'Experience',
    content:'X years of experience\nJava • Python • JavaScript\nHTML • CSS • Unity • C#',
    clickable:false
  });

  // Big Research bubble (visual children)
  makeBubble({
    x: rx(largeR), y: ry(largeR), r: largeR,
    colorClass:'c-orange', textColorClass:'t-orange',
    heading:'Technology Research Interests',
    content:'',
    clickable:false, type:'research'
  });

  // Try project (clickable)
  makeBubble({
    x: rx(normalR), y: ry(normalR), r: normalR,
    colorClass:'c-pink', textColorClass:'t-pink',
    heading:'Try My Thesis Project →',
    content:'Play my dissertation game',
    clickable:true, id:'try'
  });

  /* Runner and DOM sync */
  if(runner) Matter.Runner.stop(runner);
  runner = Runner.create();
  Runner.run(runner, engine);

  // Initial drift
  setTimeout(()=>{
    domBubbles.forEach(({body})=>{
      Body.setVelocity(body, {x:(Math.random()-0.5)*1.6, y:(Math.random()-0.5)*1.6});
    });
  }, 50);

  // Keep DOM aligned with bodies
  Events.on(engine, 'afterUpdate', ()=>{
    domBubbles.forEach(({el, body, r})=>{
      el.style.left = body.position.x + 'px';
      el.style.top  = body.position.y + 'px';
      el.style.width = (r*2)+'px';
      el.style.height= (r*2)+'px';

      // Scale heading font to radius
      const headTexts = el.querySelectorAll('.heading text');
      headTexts.forEach(t => t.style.fontSize = Math.max(10, Math.floor(r*0.18)) + 'px');

      // Scale content font slightly with size
      const content = el.querySelector('.content');
      if(content){ content.style.fontSize = Math.max(12, Math.floor(r*0.17)) + 'px'; }
    });
  });
}

/* Mouse move: small “energy” kick toward current velocity direction */
window.addEventListener('mousemove', (e)=>{
  mousePos.x = e.clientX; mousePos.y = e.clientY;
  domBubbles.forEach(({body})=>{
    const boost = 0.0005; // tiny impulse
    Body.applyForce(body, body.position, {x:(Math.random()-0.5)*boost, y:(Math.random()-0.5)*boost});
  });
});

/* Handle resize: rebuild world & keep header styles */
let resizeTimer;
window.addEventListener('resize', ()=>{
  clearTimeout(resizeTimer);
  resizeTimer = setTimeout(()=>{
    buildWorld();
    // header emphasis on resize
    document.getElementById('hdrTitle').style.fontSize = 'clamp(20px, 2.8vw, 34px)';
    document.getElementById('hdrLink').style.color = '#1a73e8';
  }, 150);
});

/* Init */
buildWorld();
</script>
</body>
</html>
