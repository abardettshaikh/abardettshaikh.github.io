<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Portfolio</title>
<style>
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  background-color: #fff8f6; /* warm near-white */
  overflow: hidden;
  font-family: "Courier New", monospace;
}
svg {
  width: 100%;
  height: 100%;
}
text {
  user-select: none;
  pointer-events: none;
}
.bubble-image {
  pointer-events: none;
}
</style>
</head>
<body>
<svg id="bubbles"></svg>

<script>
// === Config ===
const colors = [
  { fill: "#735cb0", text: "#4b2f80" }, // purple
  { fill: "#00a4ef", text: "#005f87" }, // bright blue
  { fill: "#6ab43e", text: "#3b6821" }, // green
  { fill: "#e89d41", text: "#8a5612" }, // orange
  { fill: "#fd4084", text: "#8a1240" }, // pink
  { fill: "#1dd2af", text: "#0f6e5c" }, // turquoise
  { fill: "#ff4f58", text: "#801f24" }, // pinky red
  { fill: "#ff6f3c", text: "#872e14" }  // sunset orange-red
];
const bubbleSize = 120;
const subBubbleSize = 70;
const researchQuestions = [
  { heading: "User Centric Design", text: "Why can't we make user experience fun without losing functionality or efficiency?" },
  { heading: "Education", text: "How is the learning experience evolving with technological advances and society?" },
  { heading: "Social Good", text: "How can we enable the public to make informed decisions on tech policy?" }
];

// === Helpers ===
function randomPos(radius) {
  return {
    x: Math.random() * (window.innerWidth - radius * 2) + radius,
    y: Math.random() * (window.innerHeight - radius * 2) + radius
  };
}

function makeBubble(svg, opts) {
  const group = document.createElementNS("http://www.w3.org/2000/svg", "g");
  svg.appendChild(group);

  // Circle
  const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
  circle.setAttribute("r", opts.r);
  circle.setAttribute("cx", opts.x);
  circle.setAttribute("cy", opts.y);
  circle.setAttribute("fill", opts.fill);
  group.appendChild(circle);

  // Image
  if (opts.image) {
    const img = document.createElementNS("http://www.w3.org/2000/svg", "image");
    img.setAttribute("href", opts.image);
    img.setAttribute("x", opts.x - opts.r);
    img.setAttribute("y", opts.y - opts.r);
    img.setAttribute("width", opts.r * 2);
    img.setAttribute("height", opts.r * 2);
    img.setAttribute("clip-path", `circle(${opts.r}px at ${opts.x}px ${opts.y}px)`);
    group.appendChild(img);
  }

  // Heading
  if (opts.heading) {
    const pathId = "path" + Math.random().toString(36).substr(2, 9);
    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    const arcY = opts.y - opts.r * 0.6;
    const arcX1 = opts.x - opts.r * 0.6;
    const arcX2 = opts.x + opts.r * 0.6;
    path.setAttribute("d", `M${arcX1},${arcY} A${opts.r*0.6},${opts.r*0.6} 0 0,1 ${arcX2},${arcY}`);
    path.setAttribute("fill", "none");
    path.setAttribute("id", pathId);
    svg.appendChild(path);

    const headingText = document.createElementNS("http://www.w3.org/2000/svg", "text");
    headingText.setAttribute("fill", opts.textColor);
    const textPath = document.createElementNS("http://www.w3.org/2000/svg", "textPath");
    textPath.setAttribute("href", `#${pathId}`);
    textPath.setAttribute("startOffset", "50%");
    textPath.setAttribute("text-anchor", "middle");
    textPath.setAttribute("font-size", "14px");
    textPath.textContent = opts.heading;
    headingText.appendChild(textPath);
    svg.appendChild(headingText);
  }

  // Content
  if (opts.content) {
    const contentText = document.createElementNS("http://www.w3.org/2000/svg", "text");
    contentText.setAttribute("x", opts.x);
    contentText.setAttribute("y", opts.y);
    contentText.setAttribute("text-anchor", "middle");
    contentText.setAttribute("dy", "0.35em");
    contentText.setAttribute("font-size", "12px");
    contentText.setAttribute("fill", opts.textColor);
    const lines = opts.content.split("\n");
    lines.forEach((line, i) => {
      const tspan = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
      tspan.setAttribute("x", opts.x);
      tspan.setAttribute("dy", i === 0 ? 0 : 14);
      tspan.textContent = line;
      contentText.appendChild(tspan);
    });
    group.appendChild(contentText);
  }

  return { group, circle, ...opts };
}

// === Build bubbles ===
const svg = document.getElementById("bubbles");

let usedColors = [];
function nextColor() {
  if (usedColors.length >= colors.length) usedColors = [];
  let available = colors.filter(c => !usedColors.includes(c));
  let choice = available[Math.floor(Math.random() * available.length)];
  usedColors.push(choice);
  return choice;
}

// Photo bubble
const photoColor = { fill: "#fd4084", text: "#8a1240" };
const photoBubble = makeBubble(svg, {
  ...randomPos(bubbleSize),
  r: bubbleSize,
  fill: photoColor.fill,
  textColor: photoColor.text,
  image: "IMG_9361.jpg"
});

// Education bubble
const eduColor = nextColor();
makeBubble(svg, {
  ...randomPos(bubbleSize),
  r: bubbleSize,
  fill: eduColor.fill,
  textColor: eduColor.text,
  heading: "Education",
  content: "BEng X at Y\nMSc A at B\nInterested in PhD opportunities"
});

// Experience bubble
const expColor = nextColor();
makeBubble(svg, {
  ...randomPos(bubbleSize),
  r: bubbleSize,
  fill: expColor.fill,
  textColor: expColor.text,
  heading: "Experience",
  content: "X years of experience\nJava, Python, C#, Unity"
});

// Project bubble
const projColor = nextColor();
makeBubble(svg, {
  ...randomPos(bubbleSize),
  r: bubbleSize,
  fill: projColor.fill,
  textColor: projColor.text,
  heading: "Try Project",
  content: "My Unity dissertation project"
});

// Research bubble
const researchColor = nextColor();
const researchBubble = makeBubble(svg, {
  ...randomPos(bubbleSize),
  r: bubbleSize,
  fill: researchColor.fill,
  textColor: researchColor.text,
  heading: "Technology Research Interests"
});
researchQuestions.forEach((q, i) => {
  const subColor = nextColor();
  makeBubble(svg, {
    ...randomPos(subBubbleSize),
    r: subBubbleSize,
    fill: subColor.fill,
    textColor: subColor.text,
    heading: q.heading,
    content: q.text
  });
});

// === Simple bounce physics ===
let bubbles = Array.from(svg.querySelectorAll("circle")).map(c => ({
  el: c,
  r: parseFloat(c.getAttribute("r")),
  x: parseFloat(c.getAttribute("cx")),
  y: parseFloat(c.getAttribute("cy")),
  vx: (Math.random() - 0.5) * 1.5,
  vy: (Math.random() - 0.5) * 1.5
}));

function tick() {
  bubbles.forEach(b => {
    b.x += b.vx;
    b.y += b.vy;
    if (b.x - b.r < 0 || b.x + b.r > window.innerWidth) b.vx *= -1;
    if (b.y - b.r < 0 || b.y + b.r > window.innerHeight) b.vy *= -1;
    b.el.setAttribute("cx", b.x);
    b.el.setAttribute("cy", b.y);
  });
  requestAnimationFrame(tick);
}
tick();
</script>
</body>
</html>
