<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PhD Portfolio â€“ Bubble Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  html, body {
    margin: 0;
    padding: 0;
    background-color: #fff7f5; /* Almost white, soft peach-pink */
    overflow: hidden;
    font-family: "Courier New", monospace;
  }
  canvas {
    display: block;
  }
  /* Fixed header */
  header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: transparent;
    color: #333;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 1rem;
    font-weight: bold;
    z-index: 1000;
  }
  header a {
    color: #333;
    text-decoration: none;
  }
</style>
</head>
<body>

<header>
  <div>Hello world</div>
  <div><a href="https://yourusername.github.io">yourusername.github.io</a></div>
</header>

<canvas id="bubbleCanvas"></canvas>

<script>
const canvas = document.getElementById("bubbleCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  adjustBubbleSizes();
});

// Slightly more vibrant palette (paler than original, but not pastel)
const colours = [
  {main:"#9786D8", text:"#6b57c0"}, // Purple
  {main:"#6ECBF8", text:"#009be8"}, // Blue
  {main:"#B1E087", text:"#5fae2d"}, // Green
  {main:"#F7D191", text:"#d7952f"}, // Orange
  {main:"#FF9CC2", text:"#ff3579"}  // Pink
];

class Bubble {
  constructor(x, y, r, colour, text, clickable=false, type="text") {
    this.x = x;
    this.y = y;
    this.r = r;
    this.baseR = r;
    this.colour = colour;
    this.text = text;
    this.clickable = clickable;
    this.type = type;
    this.dx = (Math.random()-0.5) * 1.5;
    this.dy = (Math.random()-0.5) * 1.5;
    if (this.type === "image") {
      this.image1 = new Image();
      this.image1.src = "IMG_9361.png";
      this.image2 = new Image();
      this.image2.src = "IMG_5766_Original.jpg";
      this.showAltImage = false;
    }
    if (this.type === "research") {
      this.subQuestions = [
        "How can games teach better?",
        "What makes design educational?",
        "Can tech change classrooms?"
      ];
    }
  }

  draw(ctx) {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.r, 0, Math.PI*2, false);
    ctx.fillStyle = this.colour.main;
    ctx.fill();
    ctx.closePath();

    ctx.fillStyle = this.colour.text;
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.font = `${this.r/3}px "Courier New", monospace`;

    if (this.type === "image") {
      const img = this.showAltImage ? this.image2 : this.image1;
      if (img.complete) {
        ctx.save();
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
        ctx.closePath();
        ctx.clip();
        ctx.drawImage(img, this.x - this.r, this.y - this.r, this.r*2, this.r*2);
        ctx.restore();
      }
    } else if (this.type === "research") {
      ctx.fillText(this.text, this.x, this.y - this.r/1.5);
      let angleStep = (Math.PI*2) / this.subQuestions.length;
      this.subQuestions.forEach((q, i) => {
        let angle = angleStep * i;
        let subX = this.x + Math.cos(angle) * this.r/1.5;
        let subY = this.y + Math.sin(angle) * this.r/1.5;
        ctx.beginPath();
        ctx.arc(subX, subY, normalBubbleSize, 0, Math.PI*2);
        ctx.fillStyle = colours[i % colours.length].main;
        ctx.fill();
        ctx.fillStyle = colours[i % colours.length].text;
        ctx.font = `${normalBubbleSize/3}px "Courier New", monospace`;
        ctx.fillText(i+1, subX, subY);
      });
    } else {
      ctx.fillText(this.text, this.x, this.y);
    }
  }

  update(mouse) {
    this.x += this.dx;
    this.y += this.dy;

    if (this.x + this.r > canvas.width || this.x - this.r < 0) this.dx *= -1;
    if (this.y + this.r > canvas.height || this.y - this.r < 0) this.dy *= -1;

    const dist = Math.hypot(this.x - mouse.x, this.y - mouse.y);
    if (dist < this.r + 50 && !this.clickable) {
      let angle = Math.atan2(this.y - mouse.y, this.x - mouse.x);
      this.x += Math.cos(angle) * 2;
      this.y += Math.sin(angle) * 2;
    }
  }
}

let normalBubbleSize;
let researchBubbleSize;
function adjustBubbleSizes() {
  normalBubbleSize = Math.min(canvas.width, canvas.height) / 8; // Bigger
  researchBubbleSize = normalBubbleSize * 1.5; // Research bubble much larger
}
adjustBubbleSizes();

const bubbles = [
  new Bubble(200, 200, normalBubbleSize, colours[0], "", true, "image"),
  new Bubble(500, 300, normalBubbleSize, colours[1], "Education", true),
  new Bubble(800, 200, normalBubbleSize, colours[2], "Experience", true),
  new Bubble(400, 500, researchBubbleSize, colours[3], "Research", true, "research"),
  new Bubble(700, 500, normalBubbleSize, colours[4], "Try Project", true)
];

const mouse = {x: -9999, y: -9999};
canvas.addEventListener("mousemove", e => {
  mouse.x = e.x;
  mouse.y = e.y;
});
canvas.addEventListener("touchmove", e => {
  if (e.touches.length > 0) {
    mouse.x = e.touches[0].clientX;
    mouse.y = e.touches[0].clientY;
  }
});

canvas.addEventListener("click", e => {
  bubbles.forEach(b => {
    const dist = Math.hypot(b.x - e.x, b.y - e.y);
    if (dist < b.r) {
      if (b.type === "image") {
        b.showAltImage = !b.showAltImage;
      } else if (b.text === "Try Project") {
        window.location.href = "project.html";
      } else if (b.text === "Education") {
        alert("MSc in X, BEng in Y, Interested in PhD Opportunities");
      } else if (b.text === "Experience") {
        alert("X years experience\nLanguages: Java, Python, C#, etc.");
      } else if (b.type === "research") {
        alert("Research:\n" + b.subQuestions.join("\n"));
      }
    }
  });
});

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  bubbles.forEach(b => {
    b.update(mouse);
    b.draw(ctx);
  });
  requestAnimationFrame(animate);
}

animate();
</script>
</body>
</html>
