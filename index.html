<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PhD Portfolio â€“ Bubble Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  html, body {
    margin: 0;
    padding: 0;
    background-color: #fff7f5; /* Soft peach-pink near white */
    overflow: hidden;
    font-family: "Courier New", monospace;
  }
  canvas {
    display: block;
    cursor: default;
  }
  header {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 50px;
    background: transparent;
    color: #333;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 1rem;
    font-weight: bold;
    z-index: 1000;
  }
  header a {
    color: #333;
    text-decoration: none;
  }
</style>
</head>
<body>

<header>
  <div>Hello world</div>
  <div><a href="https://yourusername.github.io">yourusername.github.io</a></div>
</header>

<canvas id="bubbleCanvas"></canvas>

<script>
const canvas = document.getElementById("bubbleCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

window.addEventListener("resize", () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  adjustBubbleSizes();
});

const colours = [
  {main:"#9786D8", text:"#6b57c0"}, // Purple
  {main:"#6ECBF8", text:"#009be8"}, // Blue
  {main:"#B1E087", text:"#5fae2d"}, // Green
  {main:"#F7D191", text:"#d7952f"}, // Orange
  {main:"#FF9CC2", text:"#ff3579"}  // Pink
];

class Bubble {
  constructor(x, y, r, colour, heading, content, clickable=false, type="text") {
    this.x = x;
    this.y = y;
    this.r = r;
    this.baseR = r;
    this.colour = colour;
    this.heading = heading;
    this.content = content;
    this.clickable = clickable;
    this.type = type;
    this.dx = (Math.random()-0.5) * 2;
    this.dy = (Math.random()-0.5) * 2;
    this.hover = false;

    if (this.type === "image") {
      this.image1 = new Image();
      this.image1.src = "IMG_9361.png";
      this.image2 = new Image();
      this.image2.src = "IMG_5766_Original.jpg";
    }
    if (this.type === "research") {
      this.subBubbles = [
        new Bubble(0, 0, normalBubbleSize, colours[0], "Design", "How can games teach better?"),
        new Bubble(0, 0, normalBubbleSize, colours[1], "Education", "What makes design educational?"),
        new Bubble(0, 0, normalBubbleSize, colours[2], "Technology", "Can tech change classrooms?")
      ];
    }
  }

  draw(ctx) {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
    ctx.fillStyle = this.colour.main;
    ctx.fill();
    ctx.closePath();

    // Heading text
    ctx.fillStyle = this.colour.text;
    ctx.textAlign = "center";
    ctx.font = `bold ${this.r/4}px "Courier New", monospace`;
    if (this.clickable) {
      ctx.shadowColor = "#fff";
      ctx.shadowOffsetX = 1;
      ctx.shadowOffsetY = 1;
      ctx.shadowBlur = 0;
    } else {
      ctx.shadowColor = "transparent";
    }
    ctx.fillText(this.heading, this.x, this.y - this.r/2);

    ctx.shadowColor = "transparent";
    ctx.font = `${this.r/6}px "Courier New", monospace`;
    ctx.fillText(this.content, this.x, this.y);

    // If research bubble, draw sub-bubbles inside
    if (this.type === "research") {
      const angleStep = (Math.PI*2) / this.subBubbles.length;
      const radiusForSubs = this.r * 0.6;
      this.subBubbles.forEach((sb, i) => {
        let angle = angleStep * i;
        sb.x = this.x + Math.cos(angle) * radiusForSubs;
        sb.y = this.y + Math.sin(angle) * radiusForSubs;
        sb.draw(ctx);
      });
    }

    // If image bubble, swap image on hover
    if (this.type === "image") {
      ctx.save();
      ctx.beginPath();
      ctx.arc(this.x, this.y, this.r, 0, Math.PI*2);
      ctx.closePath();
      ctx.clip();
      let img = this.hover ? this.image2 : this.image1;
      if (img.complete) {
        ctx.drawImage(img, this.x - this.r, this.y - this.r, this.r*2, this.r*2);
      }
      ctx.restore();
    }
  }

  update(bubbles) {
    this.x += this.dx;
    this.y += this.dy;

    // Wall bounce
    if (this.x + this.r > canvas.width || this.x - this.r < 0) this.dx *= -1;
    if (this.y + this.r > canvas.height || this.y - this.r < 0) this.dy *= -1;

    // Bubble-bubble collisions
    bubbles.forEach(other => {
      if (this === other) return;
      const dist = Math.hypot(this.x - other.x, this.y - other.y);
      const minDist = this.r + other.r;
      if (dist < minDist) {
        const angle = Math.atan2(this.y - other.y, this.x - other.x);
        const overlap = minDist - dist;
        this.x += Math.cos(angle) * overlap/2;
        this.y += Math.sin(angle) * overlap/2;
        other.x -= Math.cos(angle) * overlap/2;
        other.y -= Math.sin(angle) * overlap/2;

        const tmpDx = this.dx;
        const tmpDy = this.dy;
        this.dx = other.dx;
        this.dy = other.dy;
        other.dx = tmpDx;
        other.dy = tmpDy;
      }
    });
  }
}

let normalBubbleSize;
let researchBubbleSize;
function adjustBubbleSizes() {
  normalBubbleSize = Math.min(canvas.width, canvas.height) / 7;
  researchBubbleSize = normalBubbleSize * 2; // Enough space for sub-bubbles
}
adjustBubbleSizes();

// Start in random positions
function randPos(r) {
  return Math.random() * (canvas.width - 2*r) + r;
}

const bubbles = [
  new Bubble(randPos(normalBubbleSize), randPos(normalBubbleSize), normalBubbleSize, colours[0], "Me", "PhD Student", true, "image"),
  new Bubble(randPos(normalBubbleSize), randPos(normalBubbleSize), normalBubbleSize, colours[1], "Education", "MSc in X\nBEng in Y"),
  new Bubble(randPos(normalBubbleSize), randPos(normalBubbleSize), normalBubbleSize, colours[2], "Experience", "X years\nJava, Python, C#"),
  new Bubble(randPos(researchBubbleSize), randPos(researchBubbleSize), researchBubbleSize, colours[3], "Research", "", false, "research"),
  new Bubble(randPos(normalBubbleSize), randPos(normalBubbleSize), normalBubbleSize, colours[4], "Try Project", "Play my thesis game", true)
];

canvas.addEventListener("mousemove", e => {
  let hoveringClickable = false;
  bubbles.forEach(b => {
    const dist = Math.hypot(b.x - e.x, b.y - e.y);
    if (dist < b.r) {
      if (b.clickable) hoveringClickable = true;
      if (b.type === "image") b.hover = true;
    } else {
      if (b.type === "image") b.hover = false;
    }
  });
  canvas.style.cursor = hoveringClickable ? "pointer" : "default";
});

canvas.addEventListener("click", e => {
  bubbles.forEach(b => {
    const dist = Math.hypot(b.x - e.x, b.y - e.y);
    if (dist < b.r && b.clickable) {
      if (b.heading === "Try Project") {
        window.location.href = "project.html";
      }
    }
  });
});

function animate() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  bubbles.forEach(b => {
    b.update(bubbles);
    b.draw(ctx);
  });
  requestAnimationFrame(animate);
}

animate();
</script>
</body>
</html>
